(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{3193:function(e,r,i){Promise.resolve().then(i.bind(i,2763))},2763:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return d}});var s=i(7437);i(5103),i(8943),i(6279);var c=i(2265),t=i(3897),l=i(6498),n=i(4154),a=i(4295);function d(){let[e,r]=(0,c.useState)(null),[i,d]=(0,c.useState)([]),[o,h]=(0,c.useState)([]),[u,x]=(0,c.useState)(!0),[j,m]=(0,c.useState)(null);(0,t.V)(()=>{let e=document.querySelector("#nav i"),r=document.querySelector("#full i"),i=l.p8.timeline();i.to("#full",{right:0,duration:.5}),i.from("#full h4",{x:150,duration:.6,stagger:.2,opacity:0}),i.from("#full i",{opacity:0}),i.pause(),e.addEventListener("click",function(){i.play()}),r.addEventListener("click",function(){i.reverse()})}),(0,c.useEffect)(()=>{(async()=>{try{let e=await fetch("https://mavy-pxtx.onrender.com/user/userId",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Error fetching user data");let i=await e.json();r(i.userId);let s=await fetch("https://mavy-pxtx.onrender.com/user/cart",{method:"GET",credentials:"include"});if(!s.ok)throw Error("Error fetching cart data");let c=await s.json();d(c);let t=await Promise.all(c.map(async e=>{let r=await fetch("https://mavy-pxtx.onrender.com/user/products?pid=".concat(e.productId),{method:"GET",credentials:"include"});if(!r.ok)throw Error("Error fetching product data for ID ".concat(e.productId));return{productDetails:await r.json(),quantity:e.quantity}}));h(t),console.log("Fetched product details: ",t);let l=0;t.forEach(e=>{l+=e.quantity*e.productDetails.price}),m(l)}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}})()},[]);let f=async()=>{try{let r=await fetch("https://mavy-pxtx.onrender.com/user/checkout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:e,cartItems:i,totalBill:j})}),s=await r.json();if(s.url?window.location.href=s.url:console.error("Error creating Stripe Checkout session"),r.ok){let r=await fetch("https://mavy-pxtx.onrender.com/user/cartDelete/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});r.ok?(console.log("Cart items cleared successfully."),d([])):console.error("Error clearing the cart:",await r.json())}else alert(s.message||"Error during checkout...")}catch(e){console.error("Error during checkout:::",e),alert("Error occurred while placing the order.")}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("header",{children:(0,s.jsxs)("div",{className:"navbar",children:[(0,s.jsxs)("div",{id:"nav",children:[(0,s.jsx)("img",{src:"img/qt=q_95.jpeg",alt:""}),(0,s.jsx)("i",{children:(0,s.jsx)(n.dQh,{})})]}),(0,s.jsxs)("div",{id:"full",children:[(0,s.jsx)("a",{href:"/",children:(0,s.jsx)("h4",{children:"Home"})}),(0,s.jsx)("a",{href:"./about",children:(0,s.jsx)("h4",{children:"About"})}),(0,s.jsx)("a",{href:"./product",children:(0,s.jsx)("h4",{children:"Products"})}),(0,s.jsx)("a",{href:"#",children:(0,s.jsx)("h4",{children:"Cart"})}),(0,s.jsx)("a",{href:"./login",children:(0,s.jsx)("h4",{children:"Profile"})}),(0,s.jsx)("i",{children:(0,s.jsx)(a.QAE,{})})]})]})}),(0,s.jsxs)("div",{className:"cart-container",children:[(0,s.jsx)("div",{className:"cart-heading",children:(0,s.jsx)("h1",{children:"My Cart"})}),(0,s.jsxs)("div",{className:"cart-item",children:[(0,s.jsx)("div",{className:"cart-left",children:u?(0,s.jsx)("p",{children:"Loading your cart..."}):0===o.length?(0,s.jsx)("p",{children:"Your cart is empty."}):o.map((e,r)=>(0,s.jsxs)("div",{className:"item",children:[(0,s.jsx)("div",{className:"item-img",children:(0,s.jsx)("img",{src:e.productDetails.imageUrl?"img/".concat(e.productDetails.imageUrl):"img/abena.jpeg",alt:e.productDetails.imageUrl||"Fallback image"})}),(0,s.jsxs)("div",{className:"item-info",children:[(0,s.jsx)("h3",{children:e.productDetails.name}),(0,s.jsx)("p",{children:e.productDetails.description}),(0,s.jsxs)("p",{children:["$",e.productDetails.price]}),(0,s.jsxs)("form",{action:"#",children:[(0,s.jsx)("label",{children:"Qty:"}),(0,s.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>console.log("Handle quantity change")})]})]}),(0,s.jsx)("div",{className:"close",children:(0,s.jsx)("i",{className:"ri-close-line"})})]},r))}),(0,s.jsxs)("div",{className:"cart-right",children:[(0,s.jsx)("h2",{children:"Cart Total"}),(0,s.jsxs)("div",{className:"c-info",children:[(0,s.jsx)("div",{className:"c-r-info",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Cost Subtotal"}),(0,s.jsx)("p",{children:"Shipping Cost"}),(0,s.jsx)("p",{children:"Discount"}),(0,s.jsx)("h4",{children:"Total Cost"})]})}),(0,s.jsx)("div",{className:"c-l-info",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["$",j]}),(0,s.jsx)("p",{children:"$9"}),(0,s.jsx)("p",{children:"N/A"}),(0,s.jsxs)("h4",{children:["$",j+9]})]})})]}),(0,s.jsx)("div",{className:"order-btn",children:(0,s.jsx)("button",{onClick:f,children:"Place Order"})})]})]})]}),(0,s.jsx)("footer",{children:(0,s.jsx)("div",{className:"footer-cont",children:(0,s.jsxs)("div",{className:"footer",children:[(0,s.jsx)("div",{className:"company",children:(0,s.jsx)("img",{src:"img/qt=q_95.jpeg",alt:""})}),(0,s.jsxs)("div",{className:"cust-care",children:[(0,s.jsx)("h3",{children:"Customer Care"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Contact Us"})}),(0,s.jsx)("li",{children:"Call +91 123 456 789"}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"FAQ"})})]})]}),(0,s.jsxs)("div",{className:"link",children:[(0,s.jsx)("h3",{children:"Links"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"About"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Product"})})]})]}),(0,s.jsxs)("div",{className:"social",children:[(0,s.jsx)("h3",{children:"Follow Us"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Instagram"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Facebook"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",children:"Twitter"})})]})]})]})})})]})}},5103:function(){},8943:function(){},6279:function(){}},function(e){e.O(0,[805,905,522,452,922,372,971,117,744],function(){return e(e.s=3193)}),_N_E=e.O()}]);